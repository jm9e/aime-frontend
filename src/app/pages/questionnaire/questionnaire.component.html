<section class="section">
  <div class="container">
    <div class="steps is-aime" *ngIf="!submitted">

      <div class="step-item" [ngClass]="{'is-active': stepComplete(1)}" (click)="goToStep(1)">
        <div class="step-marker">1</div>
        <div class="step-details">
          <p class="step-title" [ngClass]="{'is-selected': step === 1}">Metadata</p>
        </div>
      </div>
      <div class="step-item" [ngClass]="{'is-active': stepComplete(2)}" (click)="goToStep(2)">
        <div class="step-marker is-aime">2</div>
        <div class="step-details">
          <p class="step-title" [ngClass]="{'is-selected': step === 2}">Purpose</p>
        </div>
      </div>
      <div class="step-item" [ngClass]="{'is-active': stepComplete(3)}" (click)="goToStep(3)">
        <div class="step-marker is-aime">3</div>
        <div class="step-details">
          <p class="step-title" [ngClass]="{'is-selected': step === 3}">Data</p>
        </div>
      </div>
      <div class="step-item" [ngClass]="{'is-active': stepComplete(4)}" (click)="goToStep(4)">
        <div class="step-marker">4</div>
        <div class="step-details">
          <p class="step-title" [ngClass]="{'is-selected': step === 4}">Method</p>
        </div>
      </div>
      <div class="step-item" [ngClass]="{'is-active': stepComplete(5)}" (click)="goToStep(5)">
        <div class="step-marker">5</div>
        <div class="step-details">
          <p class="step-title" [ngClass]="{'is-selected': step === 5}">Reproducibility</p>
        </div>
      </div>
      <div class="step-item" [ngClass]="{'is-active': stepComplete(6)}" (click)="goToStep(6)">
        <div class="step-marker">6</div>
        <div class="step-details">
          <p class="step-title" [ngClass]="{'is-selected': step === 6}">Review & Submit</p>
        </div>
      </div>

      <div class="steps-content">

        <div class="step-content card" [ngClass]="{'is-active': step === 1}">
          <header class="card-header">
            <div class="card-header-title">
              <h2 class="title is-4">
                Metadata
              </h2>
            </div>
          </header>
          <div class="card-content">

            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">MD.1</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <div class="control">
                    <input class="input" name="title" type="text" placeholder="Title" [(ngModel)]="questionnaire.title">
                  </div>
                  <p class="help has-text-left">
                    Title of the AI.
                    <a *ngIf="!helpExpanded['md1']" (click)="helpExpanded['md1'] = true">
                      <span class="tag is-small is-light is-outlined">
                        <span class="icon">
                          <i class="fa fa-question-circle"></i>
                        </span>
                        <span>More info</span>
                      </span>
                    </a>
                  </p>
                  <div *ngIf="helpExpanded['md1']" class="notification more-info">
                    <span class="icon">
                      <i class="fa fa-info-circle"></i>
                    </span>
                    <span>
                      Enter a title that identifies your AI, in most cases the title of your paper or a part of it.
                    </span>
                  </div>
                </div>
              </div>
            </div>

            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">MD.2</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <div class="control">
                    <textarea class="input" name="description" placeholder="Description" [(ngModel)]="questionnaire.description"></textarea>
                  </div>
                  <p class="help has-text-left">
                    Short description of the AI.
                    <a *ngIf="!helpExpanded['md2']" (click)="helpExpanded['md2'] = true">
                      <span class="tag is-small is-light is-outlined">
                        <span class="icon">
                          <i class="fa fa-question-circle"></i>
                        </span>
                        <span>More info</span>
                      </span>
                    </a>
                  </p>
                  <div *ngIf="helpExpanded['md2']" class="notification more-info">
                    <span class="icon">
                      <i class="fa fa-info-circle"></i>
                    </span>
                    <span>
                      Briefly describe your AI in a couple of sentences, similar to an abstract of a paper.
                    </span>
                  </div>
                </div>
              </div>
            </div>

            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">MD.3</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <div class="control">
                    <input class="input" name="author" type="text" placeholder="Name" [(ngModel)]="questionnaire.authorName">
                  </div>
                  <p class="help has-text-left">
                    Name of the corresponding author.
                    <a *ngIf="!helpExpanded['md3a']" (click)="helpExpanded['md3a'] = true">
                      <span class="tag is-small is-light is-outlined">
                        <span class="icon">
                          <i class="fa fa-question-circle"></i>
                        </span>
                        <span>More info</span>
                      </span>
                    </a>
                  </p>
                  <div *ngIf="helpExpanded['md3a']" class="notification more-info">
                    <span class="icon">
                      <i class="fa fa-info-circle"></i>
                    </span>
                    <span>
                      Enter the name of the corresponding author, which is in most cases the lead author.
                    </span>
                  </div>
                  <div class="control">
                    <textarea class="input" name="author" placeholder="Institutional address" [(ngModel)]="questionnaire.authorAddress"></textarea>
                  </div>
                  <p class="help has-text-left">Institutional address.</p>
                  <div class="control">
                    <input class="input" name="author" type="text" placeholder="Email address" [(ngModel)]="questionnaire.authorEmail">
                  </div>
                  <p class="help has-text-left">Email address.</p>
                  <div class="control">
                    <input class="input" name="author" type="text" placeholder="ORCID iD" [(ngModel)]="questionnaire.authorORCID">
                  </div>
                  <p class="help has-text-left">
                    ORCID iD.
                    <a *ngIf="!helpExpanded['md3e']" (click)="helpExpanded['md3e'] = true">
                      <span class="tag is-small is-light is-outlined">
                        <span class="icon">
                          <i class="fa fa-question-circle"></i>
                        </span>
                        <span>More info</span>
                      </span>
                    </a>
                  </p>
                  <div *ngIf="helpExpanded['md3e']" class="notification more-info">
                    <span class="icon">
                      <i class="fa fa-info-circle"></i>
                    </span>
                    <span>
                      Enter your <a href="https://orcid.org/" target="_blank">ORCID iD</a> which distinguishes you from
                      every other researcher and reliably associates the AIMe report with you.
                    </span>
                  </div>
                </div>
              </div>
            </div>

            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">MD.4</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <div class="control">
                    <input class="input" name="url" placeholder="Paper URL" [(ngModel)]="questionnaire.url">
                  </div>
                  <p class="help has-text-left">
                    Stable URL to a paper where the AI is described (optional).
                    <a *ngIf="!helpExpanded['md4']" (click)="helpExpanded['md4'] = true">
                      <span class="tag is-small is-light is-outlined">
                        <span class="icon">
                          <i class="fa fa-question-circle"></i>
                        </span>
                        <span>More info</span>
                      </span>
                    </a>
                  </p>
                  <div *ngIf="helpExpanded['md4']" class="notification more-info">
                    <span class="icon">
                      <i class="fa fa-info-circle"></i>
                    </span>
                    <span>
                      If available, you should report the paper's <a href="https://www.doi.org/" target="_blank">DOI</a> here.
                      Otherwise, also other stable URLs such as <a href="https://arxiv.org/" target="_blank">arXiv</a> identifiers are admissible.
                    </span>
                  </div>
                </div>
              </div>
            </div>

            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">MD.5</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <div class="control">
                    <label class="checkbox">
                      <input type="checkbox" name="public" [(ngModel)]="questionnaire.public">
                      Make public and include in database
                    </label>
                  </div>
                  <p class="help has-text-left">
                    Specification of whether the AIMe database entry should be public or private.
                    <a *ngIf="!helpExpanded['md5']" (click)="helpExpanded['md5'] = true">
                      <span class="tag is-small is-light is-outlined">
                        <span class="icon">
                          <i class="fa fa-question-circle"></i>
                        </span>
                        <span>More info</span>
                      </span>
                    </a>
                  </p>
                  <div *ngIf="helpExpanded['md5']" class="notification more-info">
                    <span class="icon">
                      <i class="fa fa-info-circle"></i>
                    </span>
                    <span>
                      AIMe provides a database so that AIs can be found and compared. If you tick the box,
                      your report can be found in the AIMe database.
                      You can publish and unpublish your report later at any point.
                    </span>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>

        <div class="step-content card" [ngClass]="{'is-active': step === 2}">
          <header class="card-header">
            <div class="card-header-title">
              <h2 class="title is-4">
                Purpose
              </h2>
            </div>
          </header>
          <div class="card-content">

            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">P.1</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <div class="control">
                    <textarea class="input" name="purpose" placeholder="Purpose" [(ngModel)]="questionnaire.purpose"></textarea>
                  </div>
                  <p class="help has-text-left">What is your AI designed to learn or predict?</p>
                </div>
              </div>
            </div>

            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">P.2</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <div class="control">
                    <label class="checkbox">
                      <input type="checkbox" name="answer" [(ngModel)]="surrogateTicked" (ngModelChange)="questionnaire.surrogate = ''">
                      Predicts surrogate marker
                    </label>
                    <textarea class="input" name="surrogate" placeholder="More detailed information" [(ngModel)]="questionnaire.surrogate" *ngIf="surrogateTicked"></textarea>
                  </div>
                  <p class="help has-text-left">Does your AI predict a surrogate marker? If so, what does it represent?</p>
                </div>
              </div>
            </div>

            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">P.3</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <div class="control">
                    <input class="input" name="category" type="text" placeholder="Category" [(ngModel)]="questionnaire.category">
                  </div>
                  <p class="help has-text-left">To which category does your AI problem belong?</p>
                </div>
              </div>
            </div>

          </div>
        </div>

        <div class="step-content card" [ngClass]="{'is-active': step === 3}">
          <header class="card-header">
            <div class="card-header-title">
              <h2 class="title is-4">
                Data
              </h2>
            </div>
          </header>
          <div class="card-content has-text-centered">
            <div *ngFor="let dataset of questionnaire.datasets; let i = index;" class="dataset">
              <h2 class="title is-4">Dataset #{{i + 1}}</h2>
              <div class="has-text-right">
                <button class="button is-danger is-small" (click)="removeDataset(i)">
                  <span class="icon">
                    <i class="fa fa-trash-o"></i>
                  </span>
                  <span>Remove</span>
                </button>
              </div>
              <br>

              <div class="field is-horizontal">
                <div class="field-label is-normal">
                  <label class="label">D{{i + 1}}.1</label>
                </div>
                <div class="field-body has-text-left">
                  <div class="field">
                    <div class="select">
                      <select name="clinical" [(ngModel)]="dataset.clinical">
                        <option [value]="'clinical'">Clinical data</option>
                        <option [value]="'omics'">Omics data</option>
                      </select>
                    </div>
                    <p class="help has-text-left">Does this dataset contain clinical data or omics data?</p>
                  </div>
                </div>
              </div>

              <div class="field is-horizontal">
                <div class="field-label is-normal">
                  <label class="label">D{{i + 1}}.2</label>
                </div>
                <div class="field-body">
                  <div class="field">
                    <div class="control">
                      <input class="input" name="type" type="text" placeholder="Type of data" [(ngModel)]="dataset.type">
                    </div>
                    <p class="help has-text-left">What is the type of the data?</p>
                  </div>
                </div>
              </div>

              <div class="field is-horizontal">
                <div class="field-label is-normal">
                  <label class="label">D{{i + 1}}.3</label>
                </div>
                <div class="field-body has-text-left">
                  <div class="field">
                    <div class="select">
                      <select name="clinical" [(ngModel)]="dataset.synthetic">
                        <option [value]="'real'">Real data</option>
                        <option [value]="'synthetic'">Synthetic data</option>
                      </select>
                    </div>
                    <div class="control condfield" *ngIf="dataset.synthetic === 'synthetic'">
                      <input class="input" name="synthetic" type="text" placeholder="Availability of the simulator" [(ngModel)]="dataset.syntheticAvailable">
                    </div>
                    <p class="help has-text-left">Is the data real or simulated? If it is simulated, is the simulator publicly available and, if so, where?</p>
                  </div>
                </div>
              </div>

              <div class="field is-horizontal">
                <div class="field-label is-normal">
                  <label class="label">D{{i + 1}}.4</label>
                </div>
                <div class="field-body">
                  <div class="field">
                    <div class="control">
                      <div class="control">
                        <label class="checkbox">
                          <input type="checkbox" name="training" [(ngModel)]="dataAvailableTicked[i]">
                          Publicly available
                        </label>
                      </div>
                      <input class="input" name="availability" placeholder="More detailed information" [(ngModel)]="dataset.availability" *ngIf="dataAvailableTicked[i]">
                    </div>
                    <p class="help has-text-left">Is the data publicly available? If so, where?</p>
                  </div>
                </div>
              </div>

              <div class="field is-horizontal">
                <div class="field-label is-normal">
                  <label class="label">D{{i + 1}}.5</label>
                </div>
                <div class="field-body">
                  <div class="field">
                    <div class="control">
                      <label class="checkbox">
                        <input type="checkbox" name="training" [(ngModel)]="dataset.training">
                        Used for training
                      </label>
                    </div>
                    <p class="help has-text-left">Is this data used for training?</p>
                  </div>
                </div>
              </div>

              <div class="field is-horizontal">
                <div class="field-label is-normal">
                  <label class="label">D{{i + 1}}.6</label>
                </div>
                <div class="field-body">
                  <div class="field">
                    <div class="control">
                      <label class="checkbox">
                        <input type="checkbox" name="answer" [(ngModel)]="biasTicked[i]" (ngModelChange)="dataset.bias = ''">
                        Subject to biases
                      </label>
                      <textarea class="input" name="surrogate" placeholder="More detailed information" [(ngModel)]="dataset.bias" *ngIf="biasTicked[i]"></textarea>
                    </div>
                    <p class="help has-text-left">Is the data subject to biases? If so, to which?</p>
                  </div>
                </div>
              </div>

              <div class="field is-horizontal">
                <div class="field-label is-normal">
                  <label class="label">D{{i + 1}}.7</label>
                </div>
                <div class="field-body">
                  <div class="field">
                    <div class="control">
                      <label class="checkbox">
                        <input type="checkbox" name="answer" [(ngModel)]="biasAddressedTicked[i]" (ngModelChange)="dataset.biasAddressed = ''">
                        Biases addressed
                      </label>
                      <textarea class="input" name="surrogate" placeholder="More detailed information" [(ngModel)]="dataset.biasAddressed" *ngIf="biasAddressedTicked[i]"></textarea>
                    </div>
                    <p class="help has-text-left">Did you address your data biases? If so, how?</p>
                  </div>
                </div>
              </div>

              <div class="field is-horizontal">
                <div class="field-label is-normal">
                  <label class="label">D{{i + 1}}.8</label>
                </div>
                <div class="field-body">
                  <div class="field">
                    <div class="control">
                      <input class="input" name="samples" placeholder="Number of samples" [(ngModel)]="dataset.samples">
                    </div>
                    <p class="help has-text-left">How many samples do you have?</p>
                    <div class="control">
                      <input class="input" name="features" placeholder="Number of features" [(ngModel)]="dataset.features">
                    </div>
                    <p class="help has-text-left">How many features do you have?</p>
                  </div>
                </div>
              </div>

              <div class="field is-horizontal">
                <div class="field-label is-normal">
                  <label class="label">D{{i + 1}}.9</label>
                </div>
                <div class="field-body">
                  <div class="field">
                    <div class="control">
                      <label class="checkbox">
                        <input type="checkbox" name="answer" [(ngModel)]="normalizedTicked[i]" (ngModelChange)="dataset.normalized = ''">
                        Normalized data
                      </label>
                      <textarea class="input" name="surrogate" placeholder="More detailed information" [(ngModel)]="dataset.normalized" *ngIf="normalizedTicked[i]"></textarea>
                    </div>
                    <p class="help has-text-left">Did you normalize your data? If so, how?</p>
                  </div>
                </div>
              </div>

              <div class="field is-horizontal">
                <div class="field-label is-normal">
                  <label class="label">D{{i + 1}}.10</label>
                </div>
                <div class="field-body">
                  <div class="field">
                    <div class="control">
                      <label class="checkbox">
                        <input type="checkbox" name="answer" [(ngModel)]="preprocessingTicked[i]" (ngModelChange)="dataset.preprocessing = ''">
                        Pre-processed data
                      </label>
                      <textarea class="input" name="surrogate" placeholder="More detailed information" [(ngModel)]="dataset.preprocessing" *ngIf="preprocessingTicked[i]"></textarea>
                    </div>
                    <p class="help has-text-left">Did you apply other pre-processing steps to your data? If so, which?</p>
                  </div>
                </div>
              </div>

            </div>
            <div class="add-form">
              <button data-nav="next" class="button is-success" (click)="addDataset()">
                <span class="icon">
                  <i class="fa fa-plus"></i>
                </span>
                <span>Add another dataset</span>
              </button>
            </div>
          </div>
        </div>

        <div class="step-content card" [ngClass]="{'is-active': step === 4}">
          <header class="card-header">
            <div class="card-header-title">
              <h2 class="title is-4">
                Method
              </h2>
            </div>
          </header>
          <div class="card-content">

            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">M.1</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <div class="control">
                    <input class="input" name="method" type="text" placeholder="AI method" [(ngModel)]="questionnaire.method">
                  </div>
                  <p class="help has-text-left">Which AI method did you use?</p>
                </div>
              </div>
            </div>

            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">M.2</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <div class="control">
                    <label class="checkbox">
                      <input type="checkbox" name="answer" [(ngModel)]="hyperparametersTicked" (ngModelChange)="questionnaire.hyperparameters = ''">
                      Employs hyper-parameters
                    </label>
                    <textarea class="input" name="hyperparameters" placeholder="More detailed information" [(ngModel)]="questionnaire.hyperparameters" *ngIf="hyperparametersTicked"></textarea>
                  </div>
                  <p class="help has-text-left">Does your method employ hyper-parameters? If so, which ones and how did you select them?</p>
                </div>
              </div>
            </div>

            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">M.3</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <div class="control">
                    <textarea class="input" name="testMetrics" placeholder="Test metrics" [(ngModel)]="questionnaire.testMetrics"></textarea>
                  </div>
                  <p class="help has-text-left">Which test metrics do you report?</p>
                </div>
              </div>
            </div>

            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">M.4</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <div class="control">
                    <textarea class="input" name="overfitting" placeholder="Overfitting" [(ngModel)]="questionnaire.overfitting"></textarea>
                  </div>
                  <p class="help has-text-left">How do you prevent overfitting?</p>
                </div>
              </div>
            </div>

            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">M.5</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <div class="control">
                    <textarea class="input" name="validation" placeholder="Validation on independent data" [(ngModel)]="questionnaire.validation"></textarea>
                  </div>
                  <p class="help has-text-left">Did you validate your method on independent data, e.g. from a different cohort?</p>
                </div>
              </div>
            </div>

            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">M.6</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <div class="control">
                    <textarea class="input" name="confoundingFactors" placeholder="Confounding factors" [(ngModel)]="questionnaire.confoundingFactors"></textarea>
                  </div>
                  <p class="help has-text-left">Did you check if your AI model is affected by confounding factors?</p>
                </div>
              </div>
            </div>

            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">M.7</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <div class="control">
                    <label class="checkbox">
                      <input type="checkbox" name="answer" [(ngModel)]="reproducibilityTicked" (ngModelChange)="questionnaire.reproducibility = ''">
                      Checked results are reproducible
                    </label>
                    <textarea class="input" name="reproducibility" placeholder="More detailed information" [(ngModel)]="questionnaire.reproducibility" *ngIf="reproducibilityTicked"></textarea>
                  </div>
                  <p class="help has-text-left">Did you check whether your results are reproducible? If so, how?</p>
                </div>
              </div>
            </div>

            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">M.8</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <div class="control">
                    <label class="checkbox">
                      <input type="checkbox" name="answer" [(ngModel)]="randomBaselineTicked" (ngModelChange)="questionnaire.randomBaseline = ''">
                      Compared against a random baseline model
                    </label>
                    <textarea class="input" name="randomBaseline" placeholder="More detailed information" [(ngModel)]="questionnaire.randomBaseline" *ngIf="randomBaselineTicked"></textarea>
                  </div>
                  <p class="help has-text-left">Did you compare against a random baseline model? If so, how?</p>
                </div>
              </div>
            </div>

            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">M.9</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <div class="control">
                    <label class="checkbox">
                      <input type="checkbox" name="answer" [(ngModel)]="stateOfTheArtTicked" (ngModelChange)="questionnaire.stateOfTheArt = ''">
                      Compared against a state of the art approaches
                    </label>
                    <textarea class="input" name="stateOfTheArt" placeholder="More detailed information" [(ngModel)]="questionnaire.stateOfTheArt" *ngIf="stateOfTheArtTicked"></textarea>
                  </div>
                  <p class="help has-text-left">Did you compare against state of the art approaches? If so, against which?</p>
                </div>
              </div>
            </div>

          </div>
        </div>

        <div class="step-content card" [ngClass]="{'is-active': step === 5}">
          <header class="card-header">
            <div class="card-header-title">
              <h2 class="title is-4">
                Reproducibility
              </h2>
            </div>
          </header>
          <div class="card-content">

            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">R.1</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <div class="control">
                    <label class="checkbox">
                      <input type="checkbox" name="answer" [(ngModel)]="availableTicked" (ngModelChange)="questionnaire.availability = ''">
                      Publicly available
                    </label>
                    <input class="input" name="method" type="text" placeholder="More detailed information" [(ngModel)]="questionnaire.availability" *ngIf="availableTicked">
                  </div>
                  <p class="help has-text-left">Is your tool or model publicly available? If so, where?</p>
                </div>
              </div>
            </div>

            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">R.2</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <div class="control">
                    <label class="checkbox">
                      <input type="checkbox" name="answer" [(ngModel)]="sourceCodeTicked" (ngModelChange)="questionnaire.sourceCode = ''">
                      Source code available
                    </label>
                    <input class="input" name="sourceCode" type="text" placeholder="More detailed information" [(ngModel)]="questionnaire.sourceCode" *ngIf="sourceCodeTicked">
                  </div>
                  <p class="help has-text-left">Is the source code of your analysis publicly available? If so, where?</p>
                </div>
              </div>
            </div>

            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">R.3</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <div class="control">
                    <textarea class="input" name="dependencies" placeholder="Dependencies" [(ngModel)]="questionnaire.dependencies"></textarea>
                  </div>
                  <p class="help has-text-left">How did you report on your dependencies?</p>
                </div>
              </div>
            </div>

            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">R.4</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <div class="control">
                    <input class="input" name="operatingSystem" type="text" placeholder="Operating system" [(ngModel)]="questionnaire.operatingSystem">
                  </div>
                  <p class="help has-text-left">On which operating system(s) did you run your analysis?</p>
                  <div class="control">
                    <input class="input" name="operatingSystem" type="text" placeholder="Hardware specifications" [(ngModel)]="questionnaire.hardwareSpecs">
                  </div>
                  <p class="help has-text-left">What were the hardware specifications?</p>
                </div>
              </div>
            </div>

            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">R.5</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <div class="control">
                    <label class="checkbox">
                      <input type="checkbox" name="answer" [(ngModel)]="highperformanceTicked" (ngModelChange)="questionnaire.highPerformance = ''">
                      Requires high-performance computing
                    </label>
                    <textarea class="input" name="highPerformance" placeholder="More detailed information" [(ngModel)]="questionnaire.highPerformance" *ngIf="highperformanceTicked"></textarea>
                  </div>
                  <p class="help has-text-left">Does your analysis require high-performance computing? If so, why?</p>
                </div>
              </div>
            </div>

          </div>
        </div>

        <div class="step-content card" [ngClass]="{'is-active': step === 6}">
          <header class="card-header">
            <div class="card-header-title">
              <h2 class="title is-4">
                Review & Submit
              </h2>
            </div>
          </header>
          <div class="card-content">
            <p>
              Below, you can find a preview report.
              Review all answers carefully.
              You can still edit your report later on, but it will create another revision.
            </p>
            <p>
              If you want to correct something, either use the <span class="tag">Previous</span> button below,
              or click on the according step above.
            </p>
            <p *ngIf="!revising">
              If you are done, click the <span class="tag is-info">Submit</span> button below to generate a
              finalized and referenceable report.
            </p>
            <p *ngIf="revising">
              If you are done, click the <span class="tag is-info">Create Revision</span> button below to update
              your report and create a new revision.
            </p>
            <br>
            <div class="viewer-wrapper" [ngClass]="{'loading': generatingPDF}">
              <div class="notification is-success" *ngIf="generatingPDF">
                <span class="icon has-text-white">
                  <i class="fa fa-spinner fa-spin"></i>
                </span>
                Generating preview report...
              </div>
              <div class="viewer">
                <h3 class="title is-5" [ngClass]="{'invisible': !displayPDF}">
                  Preview report
                </h3>
                <ng2-pdfjs-viewer #pdfViewer [ngClass]="{'invisible': !displayPDF}"></ng2-pdfjs-viewer>
              </div>
            </div>
            <br>
            <div *ngIf="!revising">
              <br>
              <div class="field">
                <div class="control">
                  <input type="email" class="input is-danger" name="email" placeholder="Your email address" [(ngModel)]="email">
                </div>
                <p class="help has-text-left">
                  Enter an email address to receive the report and admin link.
                  Make sure that it is a valid address that you have access to, otherwise you will not be able to create revisions later on.
                </p>
              </div>
              <div class="field">
                <div class="control">
                  <label class="checkbox">
                    <input type="checkbox" class="checkbox" name="attachReport" [(ngModel)]="attachReport">
                    Attach report to email
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="steps-actions">
        <div class="steps-action">
          <button data-nav="previous" class="button is-normal" (click)="goToStep(step - 1)" *ngIf="step > 1">
            <span class="icon">
              <i class="fa fa-arrow-left"></i>
            </span>
            <span>Previous</span>
          </button>
        </div>
        <div class="steps-action">
          <button data-nav="next" class="button is-success" (click)="goToStep(step + 1)" *ngIf="step < 6" [disabled]="!stepComplete(step)">
            <span>Next</span>
            <span class="icon">
              <i class="fa fa-arrow-right"></i>
            </span>
          </button>
          <button data-nav="next" class="button is-info" (click)="submitQuestionnaire()" *ngIf="step == 6"
                  [disabled]="!completeUntil(6) || (!email && !revising)">
            <span class="icon">
              <i class="fa fa-paper-plane"></i>
            </span>
            <span *ngIf="!revising">Submit</span>
            <span *ngIf="revising">Create Revision</span>
          </button>
        </div>
      </div>

    </div>

    <div class="container" *ngIf="submitted">
      <div class="notification is-info" *ngIf="!password || !id">
        <span class="icon has-text-white">
          <i class="fa fa-spinner fa-spin"></i>
        </span>
        Your report is being created...
      </div>

      <article class="message" *ngIf="password && id">
        <header class="message-header">
          <p>
            Your AIMe report
          </p>
        </header>
        <div class="message-body" *ngIf="!revising">
          <p>
            Your report <code>{{'urlDisplay' | env}}report/{{id}}.pdf</code> has been generated.
          </p>
          <br>
          <p>
            View your report here:<br>
            <a target="_blank" href="{{'url' | env}}report/{{id}}.pdf">{{'urlDisplay' | env}}report/{{id}}.pdf</a>
          </p>
          <br>
          <p>
            Edit your report here:<br>
            <a target="_blank" href="{{'url' | env}}questionnaire?id={{id}}&p={{password}}">{{'urlDisplay' | env}}questionnaire?id={{id}}&p={{password}}</a>
          </p>
          <br>
          <p>
            <a [routerLink]="['/reference']" [queryParams]="{id: id}" target="_blank">More information on how to reference your report.</a>
          </p>
          <br>
          <p>
            These links have also been sent to {{email}}.
          </p>
          <br>
          <p>
            Thank you for using the AIMe Standard.
          </p>
        </div>
        <div class="message-body" *ngIf="revising">
          <p>
            Your report <code>{{'urlDisplay' | env}}report/{{id}}.pdf</code> has been generated.
          </p>
          <br>
          <p>
            View your report here:<br>
            <a target="_blank" href="{{'url' | env}}report/{{id}}.pdf">{{'urlDisplay' | env}}report/{{id}}.pdf</a>
          </p>
          <br>
          <p>
            Edit your report here:<br>
            <a target="_blank" href="{{'url' | env}}questionnaire?id={{id}}&p={{password}}">{{'urlDisplay' | env}}questionnaire?id={{id}}&p={{password}}</a>
          </p>
          <br>
          <p>
            <a [routerLink]="['/reference']" [queryParams]="{id: id}" target="_blank">More information on how to reference your report.</a>
          </p>
          <br>
          <p>
            Thank you for using the AIMe Standard.
          </p>
        </div>
      </article>
    </div>
  </div>
</section>
