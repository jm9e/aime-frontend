<section class="section">
  <div class="container">
    <div class="steps is-aime" *ngIf="!submitted">
      <div class="step-item is-active is-hidden-mobile" [ngClass]="{'is-selected': step === 1}" (click)="goToStep(1)">
        <div class="step-marker"><i class="fad fa-at"></i></div>
        <div class="step-details">
          <p class="step-title">Metadata</p>
        </div>
      </div>
      <div class="step-item is-active is-hidden-mobile" [ngClass]="{'is-selected': step === 2}" (click)="goToStep(2)">
        <div class="step-marker"><i class="fad fa-bullseye-arrow"></i></div>
        <div class="step-details">
          <p class="step-title">Purpose</p>
        </div>
      </div>
      <div class="step-item is-active is-hidden-mobile" [ngClass]="{'is-selected': step === 3}" (click)="goToStep(3)">
        <div class="step-marker"><i class="fad fa-database"></i></div>
        <div class="step-details">
          <p class="step-title">Data</p>
        </div>
      </div>
      <div class="step-item is-active is-hidden-mobile" [ngClass]="{'is-selected': step === 4}" (click)="goToStep(4)">
        <div class="step-marker"><i class="fad fa-function"></i></div>
        <div class="step-details">
          <p class="step-title">Method</p>
        </div>
      </div>
      <div class="step-item is-active is-hidden-mobile" [ngClass]="{'is-selected': step === 5}" (click)="goToStep(5)">
        <div class="step-marker"><i class="fad fa-redo"></i></div>
        <div class="step-details">
          <p class="step-title">Reproducibility</p>
        </div>
      </div>
      <div class="step-item is-active is-hidden-mobile" [ngClass]="{'is-selected': step === 6}" (click)="goToStep(6)">
        <div class="step-marker"><i class="fad fa-check"></i></div>
        <div class="step-details">
          <p class="step-title">Review & Submit</p>
        </div>
      </div>
      <div class="is-hidden-tablet mobile-nav">
        <h1 class="title is-4">
          Questionnaire
        </h1>
        <div class="field has-addons">
          <div class="control is-expanded">
            <div class="select is-fullwidth">
              <select name="clinical" [ngModel]="step" (ngModelChange)="goToStep($event)">
                <option [value]="1">Metadata</option>
                <option [value]="2">Purpose</option>
                <option [value]="3">Datasets</option>
                <option [value]="4">Method</option>
                <option [value]="5">Reproducibility</option>
                <option [value]="6">Review & Submit</option>
              </select>
            </div>
            <p class="help">
              Questionnaire step.
            </p>
          </div>
        </div>
      </div>
      <div class="steps-content">
        <div class="step-content card" [ngClass]="{'is-active': step === 1}">
          <header class="card-header">
            <div class="card-header-title">
              <h2 class="title is-4">
                Metadata
              </h2>
            </div>
          </header>
          <div class="card-content">
            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">MD.1</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <!-- MD.1 -->
                  <app-qu-field title="Title of the AI." [description]="false">
                    <span qu-field>
                      <input class="input" name="title" type="text" placeholder="Title" [(ngModel)]="questionnaire.title">
                    </span>
                    <span qu-description></span>
                  </app-qu-field>
                </div>
              </div>
            </div>
            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">MD.2</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <!-- MD.2 -->
                  <app-qu-field title="Short description of the AI." [description]="false">
                    <span qu-field>
                      <textarea class="input" name="description" placeholder="Description" [(ngModel)]="questionnaire.description"></textarea>
                    </span>
                    <span qu-description></span>
                  </app-qu-field>
                </div>
              </div>
            </div>
            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">MD.3</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <!-- MD.3a -->
                  <app-qu-field title="Name of the corresponding author." [description]="false">
                    <span qu-field>
                      <input class="input" name="author" type="text" placeholder="Name" [(ngModel)]="questionnaire.authorName">
                    </span>
                    <span qu-description></span>
                  </app-qu-field>
                  <!-- MD.3b -->
                  <app-qu-field title="Institutional address." [description]="false">
                    <span qu-field>
                      <textarea class="input" name="author" placeholder="Institutional address" [(ngModel)]="questionnaire.authorAddress"></textarea>
                    </span>
                    <span qu-description></span>
                  </app-qu-field>
                  <!-- MD.3c -->
                  <app-qu-field title="Email address." [description]="false">
                    <span qu-field>
                      <input class="input" name="author" type="email" placeholder="Email address" [(ngModel)]="questionnaire.authorEmail" (ngModelChange)="updateEmail()">
                    </span>
                    <span qu-description></span>
                  </app-qu-field>
                  <!-- MD.3d -->
                  <app-qu-field title="ORCID iD (optional)." [description]="true">
                    <span qu-field>
                      <input class="input" name="author" type="text" placeholder="ORCID iD" [(ngModel)]="questionnaire.authorORCID">
                    </span>
                    <span qu-description>
                      If you have an <a href="https://orcid.org/" target="_blank">ORCID iD</a>, please enter it here.
                    </span>
                  </app-qu-field>
                </div>
              </div>
            </div>
            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">MD.4</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <!-- MD.4 -->
                  <app-qu-field title="Stable ID or URL to a paper where the AI is described (optional)." [description]="true">
                    <span qu-field>
                      <input class="input" name="url" placeholder="Paper URL" [(ngModel)]="questionnaire.url">
                    </span>
                    <span qu-description>
                      If available, please enter the paper's <a href="https://www.doi.org/" target="_blank">DOI</a> here.
                      Otherwise, also other stable URLs such as <a href="https://arxiv.org/" target="_blank">arXiv</a> identifiers are admissible.
                    </span>
                  </app-qu-field>
                </div>
              </div>
            </div>
            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">MD.5</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <!-- MD.5 -->
                  <app-qu-field title="Specification of whether the AIMe database entry should be public or private." [description]="true">
                    <span qu-field>
                      <label class="checkbox">
                        <input type="checkbox" name="public" [(ngModel)]="questionnaire.public">
                        Make public and include in database
                      </label>
                    </span>
                    <span qu-description>
                      AIMe provides a <a routerLink="/database" target="_blank">database</a> so that AIs can be found
                      and compared. If you tick the box, your report can be found in the AIMe database.
                      You can publish and unpublish your report later at any point.
                    </span>
                  </app-qu-field>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="step-content card" [ngClass]="{'is-active': step === 2}">
          <header class="card-header">
            <div class="card-header-title">
              <h2 class="title is-4">
                Purpose
              </h2>
            </div>
          </header>
          <div class="card-content">
            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">P.1</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <!-- P.1 -->
                  <app-qu-field title="What is your AI designed to learn or predict?" [description]="true">
                    <span qu-field>
                      <textarea class="input" name="purpose" placeholder="Purpose" [(ngModel)]="questionnaire.purpose"></textarea>
                    </span>
                    <span qu-description>
                      State what your AI is designed to learn or predict.
                      This allows practitioners or authors of competitor AI systems to easily verify if the reported AI
                      is relevant in their problem setting.
                    </span>
                  </app-qu-field>
                </div>
              </div>
            </div>
            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">P.2</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <!-- P.2 -->
                  <app-qu-field title="Does your AI predict a surrogate marker? If so, what does it represent?" [description]="true">
                    <span qu-field>
                      <label class="checkbox">
                        <input type="checkbox" name="answer" [(ngModel)]="questionnaire.fieldExpanded['P.2']" (ngModelChange)="questionnaire.surrogate = ''">
                        Predicts surrogate marker
                      </label>
                      <textarea class="input" name="surrogate" placeholder="More detailed information" [(ngModel)]="questionnaire.surrogate" *ngIf="questionnaire.fieldExpanded['P.2']"></textarea>
                    </span>
                    <span qu-description>
                      The predicted outcome does not necessarily have to be a directly measurable clinical variable but
                      can also be a surrogate marker.
                      If a surrogate marker is predicted, please clarify which clinical outcome is represented by the
                      marker.
                    </span>
                  </app-qu-field>
                </div>
              </div>
            </div>
            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">P.3</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <!-- P.3 -->
                  <app-qu-field title="To which category does your AI problem belong?" [description]="true">
                    <span qu-field>
                      <input class="input" name="category" type="text" placeholder="Category" [(ngModel)]="questionnaire.category">
                    </span>
                    <span qu-description>
                      Specify to which category their AI problem belongs.
                      Typical categories are classification (assign discrete labels to all items),
                      regression (predict a real values for all items),
                      clustering (partition a set of items into subsets of homogeneous groups),
                      ranking (learn an ordering for a set of items), and
                      dimensionality reduction (compress all items' initial high dimensional representations).
                    </span>
                  </app-qu-field>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="step-content card" [ngClass]="{'is-active': step === 3}">
          <header class="card-header">
            <div class="card-header-title">
              <h2 class="title is-4">
                Data
              </h2>
            </div>
          </header>
          <div class="card-content">
            <div *ngFor="let dataset of questionnaire.datasets; let i = index;" class="dataset">
              <h2 class="title is-4 has-text-centered">Dataset #{{i + 1}}</h2>
              <div class="has-text-right">
                <button class="button is-danger is-small" (click)="removeDataset(i)">
                  <span class="icon">
                    <i class="fa fa-trash-o"></i>
                  </span>
                  <span>Remove</span>
                </button>
              </div>
              <br>
              <div class="field is-horizontal">
                <div class="field-label is-normal">
                  <label class="label">D{{i + 1}}.1</label>
                </div>
                <div class="field-body has-text-left">
                  <div class="field">
                    <!-- D.1 -->
                    <app-qu-field title="Does this dataset contain clinical data or omics data?" [description]="false">
                      <span qu-field>
                        <div class="select">
                          <select name="clinical" [(ngModel)]="dataset.clinical">
                            <option [value]="'clinical'">Clinical data</option>
                            <option [value]="'omics'">Omics data</option>
                          </select>
                        </div>
                      </span>
                      <span qu-description></span>
                    </app-qu-field>
                  </div>
                </div>
              </div>
              <div class="field is-horizontal">
                <div class="field-label is-normal">
                  <label class="label">D{{i + 1}}.2</label>
                </div>
                <div class="field-body">
                  <div class="field">
                    <!-- D.2 -->
                    <app-qu-field title="What is the type of the data?" [description]="true">
                      <span qu-field>
                        <input class="input" name="type" type="text" placeholder="Type of data" [(ngModel)]="dataset.type">
                      </span>
                      <span qu-description>
                        Report the type of the data for this dataset, e.g., BMI, age, or blood pressure for clinical data and
                        expression, methylation, or SNPs for omics data.
                      </span>
                    </app-qu-field>
                  </div>
                </div>
              </div>
              <div class="field is-horizontal">
                <div class="field-label is-normal">
                  <label class="label">D{{i + 1}}.3</label>
                </div>
                <div class="field-body has-text-left">
                  <div class="field">
                    <!-- D.3 -->
                    <app-qu-field title="Is the data real or simulated? If it is simulated, is the simulator publicly available and, if so, where?" [description]="false">
                      <span qu-field>
                        <div class="select">
                          <select name="clinical" [(ngModel)]="dataset.synthetic">
                            <option [value]="'real'">Real data</option>
                            <option [value]="'synthetic'">Synthetic data</option>
                          </select>
                        </div>
                        <div class="control condfield" *ngIf="dataset.synthetic === 'synthetic'">
                          <input class="input" name="synthetic" type="text" placeholder="Availability of the simulator" [(ngModel)]="dataset.syntheticAvailable">
                        </div>
                      </span>
                      <span qu-description>
                        Specify whether this dataset is real or simulated.
                        If the latter is the case, please provide a pointer to the employed simulator.
                      </span>
                    </app-qu-field>
                  </div>
                </div>
              </div>
              <div class="field is-horizontal">
                <div class="field-label is-normal">
                  <label class="label">D{{i + 1}}.4</label>
                </div>
                <div class="field-body">
                  <div class="field">
                    <!-- D.4 -->
                    <app-qu-field title="Is the data publicly available? If so, where?" [description]="false">
                      <span qu-field>
                        <label class="checkbox">
                          <input type="checkbox" name="training" [(ngModel)]="dataset.fieldExpanded['D.4']" (ngModelChange)="dataset.availability = ''">
                          Publicly available
                        </label>
                        <textarea class="input" name="availability" placeholder="More detailed information" [(ngModel)]="dataset.availability" *ngIf="dataset.fieldExpanded['D.4']"></textarea>
                      </span>
                      <span qu-description></span>
                    </app-qu-field>
                  </div>
                </div>
              </div>
              <div class="field is-horizontal">
                <div class="field-label is-normal">
                  <label class="label">D{{i + 1}}.5</label>
                </div>
                <div class="field-body">
                  <div class="field">
                    <!-- D.5 -->
                    <app-qu-field title="Is this data used for training?" [description]="true">
                      <span qu-field>
                        <label class="radio">
                          <input type="radio" name="training" [value]="true" [(ngModel)]="dataset.training">
                          Used for training
                        </label>
                        <label class="radio">
                          <input type="radio" name="training" [value]="false" [(ngModel)]="dataset.training">
                          Not used for training
                        </label>
                        <label class="radio">
                          <input type="radio" name="training" [value]="null" [(ngModel)]="dataset.training">
                          Not applicable
                        </label>
                      </span>
                      <span qu-description>
                        Specify if this dataset was used for training the AI method.
                      </span>
                    </app-qu-field>
                  </div>
                </div>
              </div>
              <div class="field is-horizontal">
                <div class="field-label is-normal">
                  <label class="label">D{{i + 1}}.6</label>
                </div>
                <div class="field-body">
                  <div class="field">
                    <!-- D.6 -->
                    <app-qu-field title="Is the data subject to biases? If so, to which?" [description]="true">
                      <span qu-field>
                        <label class="checkbox">
                          <input type="checkbox" name="answer" [(ngModel)]="dataset.fieldExpanded['D.6']" (ngModelChange)="dataset.bias = ''">
                          Subject to biases
                        </label>
                        <textarea class="input" name="surrogate" placeholder="More detailed information" [(ngModel)]="dataset.bias" *ngIf="dataset.fieldExpanded['D.6']"></textarea>
                      </span>
                      <span qu-description>
                        Omics data are often subject to various biases.
                        Even if these biases can be addressed appropriately, readers should be aware of them to avoid possible misinterpretations.
                        Therefore, please disclose whether this dataset is subject to a priori known biases (e. g. class imbalance, batch effect).
                      </span>
                    </app-qu-field>
                  </div>
                </div>
              </div>
              <div class="field is-horizontal">
                <div class="field-label is-normal">
                  <label class="label">D{{i + 1}}.7</label>
                </div>
                <div class="field-body">
                  <div class="field">
                    <!-- D.7 -->
                    <app-qu-field title="Did you address your data biases? If so, how?" [description]="false">
                      <span qu-field>
                        <label class="checkbox">
                          <input type="checkbox" name="answer" [(ngModel)]="dataset.fieldExpanded['D.7']" (ngModelChange)="dataset.biasAddressed = ''">
                          Biases addressed
                        </label>
                        <textarea class="input" name="surrogate" placeholder="More detailed information" [(ngModel)]="dataset.biasAddressed" *ngIf="dataset.fieldExpanded['D.7']"></textarea>
                      </span>
                      <span qu-description></span>
                    </app-qu-field>
                  </div>
                </div>
              </div>
              <div class="field is-horizontal">
                <div class="field-label is-normal">
                  <label class="label">D{{i + 1}}.8</label>
                </div>
                <div class="field-body">
                  <div class="field">
                    <!-- D.8a -->
                    <app-qu-field title="How many samples do you have?" [description]="false">
                      <span qu-field>
                        <input class="input" name="samples" placeholder="Number of samples" [(ngModel)]="dataset.samples">
                      </span>
                      <span qu-description></span>
                    </app-qu-field>
                    <!-- D.8b -->
                    <app-qu-field title="How many features do you have?" [description]="true">
                      <span qu-field>
                        <input class="input" name="features" placeholder="Number of features" [(ngModel)]="dataset.features">
                      </span>
                      <span qu-description>
                        Specify the number of features of this dataset. This is especially important because high dimensional data often exhibits multicollinearityand sparsity, which in turn tends to negatively affect the efficiency of AI systems and often leads to overfitting in the case of supervised methods.
                      </span>
                    </app-qu-field>
                  </div>
                </div>
              </div>
              <div class="field is-horizontal">
                <div class="field-label is-normal">
                  <label class="label">D{{i + 1}}.9</label>
                </div>
                <div class="field-body">
                  <div class="field">
                    <!-- D.9 -->
                    <app-qu-field title="Did you normalize your data? If so, how?" [description]="true">
                      <span qu-field>
                        <label class="checkbox">
                          <input type="checkbox" name="answer" [(ngModel)]="dataset.fieldExpanded['D.9']" (ngModelChange)="dataset.normalized = ''">
                          Normalized data
                        </label>
                        <textarea class="input" name="surrogate" placeholder="More detailed information" [(ngModel)]="dataset.normalized" *ngIf="dataset.fieldExpanded['D.9']"></textarea>
                      </span>
                      <span qu-description>
                        Since most AI methods are not scale-invariant, the data usually needs to be normalized during
                        pre-processing.
                        Please report if this is applicable to this dataset and if so, how this is done here.
                        For instance, some methods such as principal component analysis perform optimally with
                        zero-centered data, while others such as typical neural network architectures require the data
                        to be scaled between zero and one.
                      </span>
                    </app-qu-field>
                  </div>
                </div>
              </div>
              <div class="field is-horizontal">
                <div class="field-label is-normal">
                  <label class="label">D{{i + 1}}.10</label>
                </div>
                <div class="field-body">
                  <div class="field">
                    <!-- D10 -->
                    <app-qu-field title="Did you apply other pre-processing steps to your data? If so, which?" [description]="true">
                      <span qu-field>
                        <label class="checkbox">
                          <input type="checkbox" name="answer" [(ngModel)]="dataset.fieldExpanded['D.10']" (ngModelChange)="dataset.preprocessing = ''">
                          Pre-processed data
                        </label>
                        <textarea class="input" name="surrogate" placeholder="More detailed information" [(ngModel)]="dataset.preprocessing" *ngIf="dataset.fieldExpanded['D.10']"></textarea>
                      </span>
                      <span qu-description>
                        There are various pre-processing techniques such feature engineering and pre-selection that can
                        be used to make the data more suitable for AI-based algorithms.
                        Whether or not such techniques have been employed should be reported here.
                      </span>
                    </app-qu-field>
                  </div>
                </div>
              </div>
            </div>
            <div class="add-form">
              <button data-nav="next" class="button is-success" (click)="addDataset()">
                <span class="icon">
                  <i class="fa fa-plus"></i>
                </span>
                <span>Add another dataset</span>
              </button>
            </div>
          </div>
        </div>
        <div class="step-content card" [ngClass]="{'is-active': step === 4}">
          <header class="card-header">
            <div class="card-header-title">
              <h2 class="title is-4">
                Method
              </h2>
            </div>
          </header>
          <div class="card-content">
            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">M.1</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <!-- M.1  -->
                  <app-qu-field title="Which AI or optimization methods did you use?" [description]="true">
                    <span qu-field>
                      <input class="input" name="method" type="text" placeholder="AI methods" [(ngModel)]="questionnaire.method">
                    </span>
                    <span qu-description>
                      Specify which AI or optimization methods (e.g., logistic regression,random forest classification,
                      deep neural networks, ant colony optimization, genetic programming) were used.
                    </span>
                  </app-qu-field>
                </div>
              </div>
            </div>
            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">M.2</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <!-- M.2 -->
                  <app-qu-field title="Do your methods employ hyper-parameters? If so, which ones and how did you select them?" [description]="true">
                    <span qu-field>
                      <label class="checkbox">
                        <input type="checkbox" name="answer" [(ngModel)]="questionnaire.fieldExpanded['M.2']" (ngModelChange)="questionnaire.hyperparameters = ''">
                        Employ hyper-parameters
                      </label>
                      <textarea class="input" name="hyperparameters" placeholder="More detailed information" [(ngModel)]="questionnaire.hyperparameters" *ngIf="questionnaire.fieldExpanded['M.2']"></textarea>
                    </span>
                    <span qu-description>
                      Specify whether the employed methods have any hyper-parameters (e. g. number of trees and maximal depth of random forest models).
                      If so, please report how you picked the values for these hyper-parameters.
                      Reporting the hyper-parameters is important because they typically have a huge impact on the algorithm's performance.
                    </span>
                  </app-qu-field>
                </div>
              </div>
            </div>
            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">M.3</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <!-- M.3 -->
                  <app-qu-field title="Which test metrics do you report?" [description]="true">
                    <span qu-field>
                      <textarea class="input" name="testMetrics" placeholder="Test metrics" [(ngModel)]="questionnaire.testMetrics"></textarea>
                    </span>
                    <span qu-description>
                      Specify which test metrics (e. g. Gini coefficient, running time, mean squared error) were used
                      to evaluate the method.
                    </span>
                  </app-qu-field>
                </div>
              </div>
            </div>
            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">M.4</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <!-- M.4 -->
                  <app-qu-field title="How do you prevent overfitting?" [description]="true">
                    <span qu-field>
                      <textarea class="input" name="overfitting" placeholder="Overfitting" [(ngModel)]="questionnaire.overfitting"></textarea>
                    </span>
                    <span qu-description>
                      Report how you prevented overfitting, i. e. how you ensured your AI model does not merely memorize
                      the training data and can generalize to unseen, independent data.
                      Overfitting can be prevented by using various techniques such as ensemble learning,
                      cross-validation, and regularization.
                    </span>
                  </app-qu-field>
                </div>
              </div>
            </div>
            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">M.5</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <!-- M.5 -->
                  <app-qu-field title="Did you validate your AI on independent data, e.g., from a different cohort?" [description]="false">
                    <span qu-field>
                      <textarea class="input" name="validation" placeholder="Validation on independent data" [(ngModel)]="questionnaire.validation"></textarea>
                    </span>
                    <span qu-description></span>
                  </app-qu-field>
                </div>
              </div>
            </div>
            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">M.6</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <!-- M.6 -->
                  <app-qu-field title="Did you check if your AI model is affected by confounding factors?" [description]="true">
                    <span qu-field>
                      <textarea class="input" name="confoundingFactors" placeholder="Confounding factors" [(ngModel)]="questionnaire.confoundingFactors"></textarea>
                    </span>
                    <span qu-description>
                      Clarify how you checked your AI model has been affected by confounding factors.
                      Confounding factors are variables that influence both the model input and output variables, and
                      as a result, potentially distort the obtained results.
                    </span>
                  </app-qu-field>
                </div>
              </div>
            </div>
            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">M.7</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <!-- M.7 -->
                  <app-qu-field title="Did you check whether your AI is robust? If so, how?" [description]="true">
                    <span qu-field>
                      <label class="checkbox">
                        <input type="checkbox" name="answer" [(ngModel)]="questionnaire.fieldExpanded['M.7']" (ngModelChange)="questionnaire.reproducibility = ''">
                        Checked that results are robust
                      </label>
                      <textarea class="input" name="reproducibility" placeholder="More detailed information" [(ngModel)]="questionnaire.reproducibility" *ngIf="questionnaire.fieldExpanded['M.7']"></textarea>
                    </span>
                    <span qu-description>
                      To make sure the results are stable and there are no random effects, please report how you made
                      sure your AI is robust.
                    </span>
                  </app-qu-field>
                </div>
              </div>
            </div>
            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">M.8</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <!-- M.8 -->
                  <app-qu-field title="Did you compare against a simple baseline model? If so, how?" [description]="true">
                    <span qu-field>
                      <label class="checkbox">
                        <input type="checkbox" name="answer" [(ngModel)]="questionnaire.fieldExpanded['M.8']" (ngModelChange)="questionnaire.randomBaseline = ''">
                        Compared against a random baseline model
                      </label>
                      <textarea class="input" name="randomBaseline" placeholder="More detailed information" [(ngModel)]="questionnaire.randomBaseline" *ngIf="questionnaire.fieldExpanded['M.8']"></textarea>
                    </span>
                    <span qu-description>
                      Specify whether you made comparisons between your AI system and a simple baseline model, and if
                      so, explain how you compared them.
                    </span>
                  </app-qu-field>
                </div>
              </div>
            </div>
            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">M.9</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <!-- M.9 -->
                  <app-qu-field title="Did you compare against state-of-the-art approaches? If so, against which?" [description]="true">
                    <span qu-field>
                      <label class="checkbox">
                        <input type="checkbox" name="answer" [(ngModel)]="questionnaire.fieldExpanded['M.9']" (ngModelChange)="questionnaire.stateOfTheArt = ''">
                        Compared against state-of-the-art approaches
                      </label>
                      <textarea class="input" name="stateOfTheArt" placeholder="More detailed information" [(ngModel)]="questionnaire.stateOfTheArt" *ngIf="questionnaire.fieldExpanded['M.9']"></textarea>
                    </span>
                    <span qu-description>
                      Specify whether you made comparisons between your AI system and state-of-the-art approaches that
                      are designed for the same or for a similar purpose as your AI system.
                    </span>
                  </app-qu-field>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="step-content card" [ngClass]="{'is-active': step === 5}">
          <header class="card-header">
            <div class="card-header-title">
              <h2 class="title is-4">
                Reproducibility
              </h2>
            </div>
          </header>
          <div class="card-content">
            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">R.1</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <!-- R.1 -->
                  <app-qu-field title="Which AI or optimization tools did you use for implementing your system? Are these tools publicly available and, if so, where?" [description]="true">
                    <span qu-field>
                      <textarea class="input" placeholder="More detailed information" [(ngModel)]="questionnaire.availability"></textarea>
                    </span>
                    <span qu-description>
                      State whether or not the employed tools are publicly available and, if so, provide a link to it.
                      In most cases, you will probably use existing tools such as Python or R packages, but it might
                      also be the case that your AI system is built upon self-implemented software.
                    </span>
                  </app-qu-field>
                </div>
              </div>
            </div>
            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">R.2</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <!-- R.2 -->
                  <app-qu-field title="Is the source code of your analysis publicly available? If so, where?" [description]="true">
                    <span qu-field>
                      <label class="checkbox">
                        <input type="checkbox" name="answer" [(ngModel)]="questionnaire.fieldExpanded['R.2']" (ngModelChange)="questionnaire.sourceCode = ''">
                        Source code of analysis publicly available
                      </label>
                      <input class="input" name="sourceCode" type="text" placeholder="More detailed information" [(ngModel)]="questionnaire.sourceCode" *ngIf="questionnaire.fieldExpanded['R.2']">
                    </span>
                    <span qu-description>
                      Share a pointer to the source code of your analysis here, i. e. the code that has to be run to
                      actually reproduce the experiments.
                      To clearly see the difference between the questions (R.1) and (R.2), assume that an AI uses the
                      K-means implementation of the widely used Python library
                      <a href="https://scikit-learn.org/" target="_blank">scikit-learn</a> for a biomedical clustering
                      problem.
                      While in this case a link to scikit-learn suffices as an answer to (R.1), for answering this
                      question, you should provide a link to the Python script which you implemented on top of
                      scikit-learn.
                    </span>
                  </app-qu-field>
                </div>
              </div>
            </div>
            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">R.3</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <!-- R.3 -->
                  <app-qu-field title="How did you report on your dependencies?" [description]="true">
                    <span qu-field>
                      <textarea class="input" name="dependencies" placeholder="Dependencies" [(ngModel)]="questionnaire.dependencies"></textarea>
                    </span>
                    <span qu-description>
                      State how you reported the dependencies of your experiments, e.g., via README or requirements
                      files.
                    </span>
                  </app-qu-field>
                </div>
              </div>
            </div>
            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">R.4</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <!-- R.4a -->
                  <app-qu-field title="On which operating system(s) did you run your analysis?" [description]="true">
                    <span qu-field>
                      <input class="input" name="operatingSystem" type="text" placeholder="Operating system" [(ngModel)]="questionnaire.operatingSystem">
                    </span>
                    <span qu-description>
                      Specify the operating system(s) of the machine(s) on which you ran the experiments.
                    </span>
                  </app-qu-field>
                  <!-- R.4b -->
                  <app-qu-field title="On which hardware did you run your analysis?" [description]="true">
                    <span qu-field>
                      <input class="input" name="operatingSystem" type="text" placeholder="Hardware specifications" [(ngModel)]="questionnaire.hardwareSpecs">
                    </span>
                    <span qu-description>
                      Report the hardware specification of the machine on which you ran the experiments.
                      Knowing on which hardware the AI was run is especially important if runtime is among the reported
                      metrics (cf. question M.3).
                    </span>
                  </app-qu-field>
                </div>
              </div>
            </div>
            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">R.5</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <!-- R.5 -->
                  <app-qu-field title="Does your analysis require high-performance computing? If so, why?" [description]="true">
                    <span qu-field>
                      <label class="checkbox">
                        <input type="checkbox" name="answer" [(ngModel)]="questionnaire.fieldExpanded['R.5']" (ngModelChange)="questionnaire.highPerformance = ''">
                        Requires high-performance computing
                      </label>
                      <textarea class="input" name="highPerformance" placeholder="More detailed information" [(ngModel)]="questionnaire.highPerformance" *ngIf="questionnaire.fieldExpanded['R.5']"></textarea>
                    </span>
                    <span qu-description>
                      Report whether, and if so why, your AI requires high-performance computing.
                      The intended reading is that an AI requires high-performance computing if it is infeasible to run
                      it on a personal computer.
                    </span>
                  </app-qu-field>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="step-content card" [ngClass]="{'is-active': step === 6}">
          <header class="card-header">
            <div class="card-header-title">
              <h2 class="title is-4">
                Review & Submit
              </h2>
            </div>
          </header>
          <div class="card-content" *ngIf="missingFields.length > 0">
            <p>
              The preview report cannot be generated because some of the answers are incorrect or missing:
            </p>
            <br>
            <ul class="incorrect">
              <li *ngFor="let field of missingFields" (click)="goToStep(field.step)"><strong>{{field.id}}</strong> - {{field.name}}</li>
            </ul>
          </div>
          <div class="card-content" *ngIf="missingFields.length === 0">
            <p>
              Below, you can find a preview report.
              Review all answers carefully.
              You can still edit your report later on, but it will create another revision.
            </p>
            <p>
              If you want to correct something, either use the <span class="tag">Previous</span> button below,
              or click on the according step above.
            </p>
            <p *ngIf="!revising">
              If you are done, click the <span class="tag is-info">Submit</span> button below to generate a
              finalized and referenceable report.
            </p>
            <p *ngIf="revising">
              If you are done, click the <span class="tag is-info">Create Revision</span> button below to update
              your report and create a new revision.
            </p>
            <br>
            <div class="viewer-wrapper" [ngClass]="{'loading': generatingPDF}">
              <div class="notification is-success" *ngIf="generatingPDF">
                <span class="icon has-text-white">
                  <i class="fa fa-spinner fa-spin"></i>
                </span>
                Generating preview report...
              </div>
              <div class="viewer">
                <h3 class="title is-5" [ngClass]="{'invisible': !displayPDF}">
                  Preview report
                </h3>
                <ng2-pdfjs-viewer #pdfViewer [ngClass]="{'invisible': !displayPDF}"></ng2-pdfjs-viewer>
              </div>
            </div>
            <br>
            <div *ngIf="!revising">
              <br>
              <div class="field">
                <div class="control">
                  <input type="email" class="input is-danger" name="email" placeholder="Your email address" [(ngModel)]="email" (focus)="emailChanged = true">
                </div>
                <p class="help has-text-left">
                  Enter an email address to receive the report and admin link.
                  Make sure that it is a valid address that you have access to, otherwise you will not be able to create revisions later on.
                </p>
              </div>
              <div class="field">
                <div class="control">
                  <label class="checkbox">
                    <input type="checkbox" class="checkbox" name="attachReport" [(ngModel)]="attachReport">
                    Attach report to email
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="steps-actions">
        <div class="steps-action">
          <button data-nav="previous" class="button is-normal" (click)="goToStep(step - 1)" *ngIf="step > 1">
            <span class="icon">
              <i class="fa fa-arrow-left"></i>
            </span>
            <span>Previous</span>
          </button>
        </div>
        <div class="steps-action">
          <button data-nav="next" class="button is-success" (click)="goToStep(step + 1)" *ngIf="step < 6">
            <span>Next</span>
            <span class="icon">
              <i class="fa fa-arrow-right"></i>
            </span>
          </button>
          <button data-nav="next" class="button is-info" (click)="submitQuestionnaire()" *ngIf="step == 6" [disabled]="(!email && !revising) || missingFields.length > 0">
            <span class="icon">
              <i class="fa fa-paper-plane"></i>
            </span>
            <span *ngIf="!revising">Submit</span>
            <span *ngIf="revising">Create Revision</span>
          </button>
        </div>
      </div>

    </div>

    <div class="container" *ngIf="submitted">
      <div class="notification is-info" *ngIf="!password || !id">
        <span class="icon has-text-white">
          <i class="fa fa-spinner fa-spin"></i>
        </span>
        Your report is being created...
      </div>

      <article class="message" *ngIf="password && id">
        <header class="message-header">
          <p>
            Your AIMe report
          </p>
        </header>
        <div class="message-body" *ngIf="!revising">
          <p>
            Your report <code>{{'urlDisplay' | env}}report/{{id}}.pdf</code> has been generated.
          </p>
          <br>
          <p>
            View your report here:<br>
            <a target="_blank" href="{{'url' | env}}report/{{id}}.pdf">{{'urlDisplay' | env}}report/{{id}}.pdf</a>
          </p>
          <br>
          <p>
            Edit your report here:<br>
            <a target="_blank" href="{{'url' | env}}questionnaire?id={{id}}&p={{password}}">{{'urlDisplay' | env}}questionnaire?id={{id}}&p={{password}}</a>
          </p>
          <br>
          <p>
            To cite your report, you can use the following BibTeX code:
          </p>
          <app-cite-report [id]="id" [questionnaire]="questionnaire"></app-cite-report>
          <br>
          <p>
            These instructions have also been sent to {{email}}.
          </p>
          <br>
          <p>
            Thank you for using the AIMe standard.
          </p>
        </div>
        <div class="message-body" *ngIf="revising">
          <p>
            Your report <code>{{'urlDisplay' | env}}report/{{id}}.pdf</code> has been generated.
          </p>
          <br>
          <p>
            View your report here:<br>
            <a target="_blank" href="{{'url' | env}}report/{{id}}.pdf">{{'urlDisplay' | env}}report/{{id}}.pdf</a>
          </p>
          <br>
          <p>
            Edit your report here:<br>
            <a target="_blank" href="{{'url' | env}}questionnaire?id={{id}}&p={{password}}">{{'urlDisplay' | env}}questionnaire?id={{id}}&p={{password}}</a>
          </p>
          <br>
          <p>
            To cite your report, you can use the following BibTeX code:
          </p>
          <pre>@misc{{'{aimeReport' + id}},
  title={{'{AIMe Report' + id + '}'}},
  author={{'{' + questionnaire.authorName + '}'}},
  howpublished={{'{\\url{https://aime-standard.org/report/' + id + '.pdf}' + '}'}},
  year={{'{2020}'}},
{{'}'}}</pre>
          <br>
          <p>
            Thank you for using the AIMe standard.
          </p>
        </div>
      </article>
    </div>
  </div>
</section>
